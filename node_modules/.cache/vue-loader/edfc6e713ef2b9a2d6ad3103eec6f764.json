{"remainingRequest":"/Users/bewe/Documents/ppta/subtically/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/bewe/Documents/ppta/subtically/web/src/components/user/ProfileController.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/bewe/Documents/ppta/subtically/web/src/components/user/ProfileController.vue","mtime":1605930899313},{"path":"/Users/bewe/Documents/ppta/subtically/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/bewe/Documents/ppta/subtically/web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/bewe/Documents/ppta/subtically/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/bewe/Documents/ppta/subtically/web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTGlzdCIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNoZWNrYm94OiBmYWxzZSwKICAgICAgbG9hZDogZmFsc2UsCiAgICAgIHNuYWNrYmFyOiBmYWxzZSwKICAgICAgZXJyb3JfbWVzc2FnZTogJycsCiAgICAgIGNvbG9yOiAnJywKICAgICAgc2VhcmNoOiBudWxsLAogICAgICBkaWFsb2dDb25maXJtOiBmYWxzZSwKICAgICAgcHJvZmlsZTogbmV3IEZvcm1EYXRhLAogICAgICBwcm9maWxlczogW10sCiAgICAgIGZvcm06IHsKICAgICAgICBpZDogbnVsbCwKICAgICAgICBuYW1lOiBudWxsLAogICAgICAgIGVtYWlsOiBudWxsLAogICAgICAgIHBhc3N3b3JkOiBudWxsLAogICAgICAgIHBhc3N3b3JkX29sZDogbnVsbCwKICAgICAgICBwYXNzd29yZF9jb25maXJtYXRpb246IG51bGwsCiAgICAgICAgZ2FtYmFyOiBudWxsCiAgICAgIH0sCiAgICAgIGNoZWNrZWRfaW1nOiBmYWxzZSwKICAgICAgaW1hZ2VVcmw6ICcnLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uQ2hhbmdlKGUpIHsKICAgICAgICBjb25zdCBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF0KICAgICAgICB0aGlzLmZvcm0uZ2FtYmFyID0gZmlsZQogICAgICAgIHRoaXMuaW1hZ2VVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpCiAgICB9LAogICAgLy9yZWFkIGRhdGEgcHJvZHVjdAogICAgcmVhZERhdGEoKSB7CiAgICAgIHZhciB1cmwgPSB0aGlzLiRhcGkgKyAnL3VzZXItcHJvZmlsZScKICAgICAgdGhpcy4kaHR0cC5nZXQodXJsLCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKQogICAgICAgIH0KICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5mb3JtLmlkID0gcmVzcG9uc2UuZGF0YVswXS5pZAogICAgICAgIHRoaXMuZm9ybS5uYW1lID0gcmVzcG9uc2UuZGF0YVswXS5uYW1lCiAgICAgICAgdGhpcy5mb3JtLmVtYWlsID0gcmVzcG9uc2UuZGF0YVswXS5lbWFpbAogICAgICB9KQogICAgfSwKICAgIC8vdWJhaCBkYXRhIHByb2R1awogICAgdXBkYXRlKCkgewogICAgICBsZXQgbmV3RGF0YSA9IHsKICAgICAgICBuYW1lOiB0aGlzLmZvcm0ubmFtZSwKICAgICAgICBlbWFpbDogdGhpcy5mb3JtLmVtYWlsLAogICAgICAgIHBhc3N3b3JkOiB0aGlzLmZvcm0ucGFzc3dvcmQsCiAgICAgICAgcGFzc3dvcmRfb2xkOiB0aGlzLmZvcm0ucGFzc3dvcmRfb2xkLAogICAgICAgIHBhc3N3b3JkX2NvbmZpcm1hdGlvbjogdGhpcy5mb3JtLnBhc3N3b3JkX2NvbmZpcm1hdGlvbiwKICAgICAgICBjaGVja2JveCA6IHRoaXMuY2hlY2tib3gsCiAgICAgIH0KICAgICAgdmFyIHVybCA9IHRoaXMuJGFwaSArICcvdXBkYXRlLycgKyB0aGlzLmZvcm0uaWQ7CiAgICAgIGNvbnNvbGUubG9nKHVybCkKICAgICAgdGhpcy5sb2FkID0gdHJ1ZQogICAgICB0aGlzLiRodHRwLnB1dCh1cmwsIG5ld0RhdGEsIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpCiAgICAgICAgfQogICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLmVycm9yX21lc3NhZ2UgPSByZXNwb25zZS5kYXRhLm1lc3NhZ2U7CiAgICAgICAgdGhpcy5jb2xvciA9ICJncmVlbiIKICAgICAgICB0aGlzLnNuYWNrYmFyID0gdHJ1ZTsKICAgICAgICB0aGlzLmxvYWQgPSBmYWxzZTsKICAgICAgICB0aGlzLnJlYWREYXRhKCk7IC8vbWVuZ2FtYmlsIGRhdGEKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRoaXMuZXJyb3JfbWVzc2FnZSA9IGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZTsKICAgICAgICB0aGlzLmNvbG9yID0gInJlZCIKICAgICAgICB0aGlzLnNuYWNrYmFyID0gdHJ1ZTsKICAgICAgICB0aGlzLmxvYWQgPSBmYWxzZTsKICAgICAgfSkKICAgIH0sCiAgICBkZWxldGVBa3VuKCkgewogICAgICAvL21lbmdhaGFwdXMgZGF0YSAKICAgICAgdmFyIHVybCA9IHRoaXMuJGFwaSArICcvZGVsZXRlJzsKICAgICAgLy9kYXRhIGRpaGFwdXMgYmVyZGFzYXJrYW4gaWQgCiAgICAgIHRoaXMuJGh0dHAuZGVsZXRlKHVybCwgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykKICAgICAgICAgIH0KICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5lcnJvcl9tZXNzYWdlPXJlc3BvbnNlLmRhdGEubWVzc2FnZTsKICAgICAgICB0aGlzLmNvbG9yPSJncmVlbiIKICAgICAgICB0aGlzLnNuYWNrYmFyPXRydWU7CiAgICAgICAgdGhpcy5sb2FkID0gZmFsc2U7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICBuYW1lOiAnbG9naW4nCiAgICAgICAgfSkKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRoaXMuZXJyb3JfbWVzc2FnZT1lcnJvci5yZXNwb25zZS5kYXRhLm1lc3NhZ2U7CiAgICAgICAgdGhpcy5jb2xvcj0icmVkIgogICAgICAgIHRoaXMuc25hY2tiYXI9dHJ1ZTsKICAgICAgICB0aGlzLmxvYWQgPSBmYWxzZTsKICAgICAgfSkKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLnJlYWREYXRhKCk7CiAgfSwKfTsK"},{"version":3,"sources":["ProfileController.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProfileController.vue","sourceRoot":"src/components/user","sourcesContent":["<!-- @format -->\n\n<template>\n  <v-main class=\"list\">\n    <h3 class=\"text-h3 font-weight-medium mb-5\"> Profile </h3>\n\n    <v-card>\n      <v-card-title>\n\n      </v-card-title>\n      <v-card-text>\n        <v-container>\n          <img v-if=\"imageUrl\" :src=\"imageUrl\" alt=\"Profile foto\" width=\"150\" height=\"180\">\n          <img v-else :src=\"$api + 'uploads/' + form.gambar\" alt=\"Profile foto\" width=\"150\" height=\"180\"><br>\n          <label>Ubah gambar? </label>\n          <input type=\"checkbox\" id=\"checkbox_img\" v-model=\"checked_img\"><br>\n          <input v-if=\"checked_img\" type=\"file\" accept=\"image/*\" @change=\"onChange\" />\n          <v-text-field v-model=\"form.name\" label=\"Nama\" required></v-text-field>\n          <v-text-field v-model=\"form.email\" label=\"Email\" required></v-text-field>\n          <v-checkbox v-model=\"checkbox\" hide-details></v-checkbox>Change Password?\n          <v-text-field v-if=\"this.checkbox\" v-model=\"form.password_old\" label=\"Old Password\"></v-text-field>\n          <v-text-field v-if=\"this.checkbox\" v-model=\"form.password\" label=\"New Password\"></v-text-field>\n          <v-text-field v-if=\"this.checkbox\" v-model=\"form.password_confirmation\" label=\"New Password Confirmation\"></v-text-field>\n        </v-container>\n      </v-card-text>\n      <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"blue darken-1\" text @click=\"deleteAkun\">\n            Hapus Akun\n          </v-btn>\n          <v-btn color=\"blue darken-1\" text @click=\"update\">\n            Save\n          </v-btn>\n        </v-card-actions>\n    </v-card>\n\n    <v-dialog v-model=\"dialogConfirm\" persistent max-width=\"400px\">\n      <v-card>\n        <v-card-title>\n          <span class=\"headline\">warning!</span>\n        </v-card-title>\n        <v-card-text>\n          Anda yakin ingin menghapus akun?\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"blue darken-1\" text @click=\"dialogConfirm = false\">\n            Cancel\n          </v-btn>\n          <v-btn color=\"blue darken-1\" text>\n            Delete\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n    <v-snackbar v-model=\"snackbar\" :color=\"color\" timeout=\"2000\" bottom>\n      {{error_message}}\n    </v-snackbar>\n  </v-main>\n</template>\n<script>\n  export default {\n    name: \"List\",\n    data() {\n      return {\n        checkbox: false,\n        load: false,\n        snackbar: false,\n        error_message: '',\n        color: '',\n        search: null,\n        dialogConfirm: false,\n        profile: new FormData,\n        profiles: [],\n        form: {\n          id: null,\n          name: null,\n          email: null,\n          password: null,\n          password_old: null,\n          password_confirmation: null,\n          gambar: null\n        },\n        checked_img: false,\n        imageUrl: '',\n      };\n    },\n    methods: {\n      onChange(e) {\n          const file = e.target.files[0]\n          this.form.gambar = file\n          this.imageUrl = URL.createObjectURL(file)\n      },\n      //read data product\n      readData() {\n        var url = this.$api + '/user-profile'\n        this.$http.get(url, {\n          headers: {\n            'Authorization': 'Bearer ' + localStorage.getItem('token')\n          }\n        }).then(response => {\n          this.form.id = response.data[0].id\n          this.form.name = response.data[0].name\n          this.form.email = response.data[0].email\n        })\n      },\n      //ubah data produk\n      update() {\n        let newData = {\n          name: this.form.name,\n          email: this.form.email,\n          password: this.form.password,\n          password_old: this.form.password_old,\n          password_confirmation: this.form.password_confirmation,\n          checkbox : this.checkbox,\n        }\n        var url = this.$api + '/update/' + this.form.id;\n        console.log(url)\n        this.load = true\n        this.$http.put(url, newData, {\n          headers: {\n            'Authorization': 'Bearer ' + localStorage.getItem('token')\n          }\n        }).then(response => {\n          this.error_message = response.data.message;\n          this.color = \"green\"\n          this.snackbar = true;\n          this.load = false;\n          this.readData(); //mengambil data\n        }).catch(error => {\n          this.error_message = error.response.data.message;\n          this.color = \"red\"\n          this.snackbar = true;\n          this.load = false;\n        })\n      },\n      deleteAkun() {\n        //mengahapus data \n        var url = this.$api + '/delete';\n        //data dihapus berdasarkan id \n        this.$http.delete(url, {\n            headers: {\n                'Authorization': 'Bearer ' + localStorage.getItem('token')\n            }\n        }).then(response => {\n          this.error_message=response.data.message;\n          this.color=\"green\"\n          this.snackbar=true;\n          this.load = false;\n          this.$router.push({\n              name: 'login'\n          })\n        }).catch(error => {\n          this.error_message=error.response.data.message;\n          this.color=\"red\"\n          this.snackbar=true;\n          this.load = false;\n        })\n      }\n    },\n    mounted() {\n      this.readData();\n    },\n  };\n</script>"]}]}