{"remainingRequest":"/Users/bewe/Documents/ppta/subtically/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/bewe/Documents/ppta/subtically/web/src/components/user/updateController.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/bewe/Documents/ppta/subtically/web/src/components/user/updateController.vue","mtime":1609730058996},{"path":"/Users/bewe/Documents/ppta/subtically/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/bewe/Documents/ppta/subtically/web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/bewe/Documents/ppta/subtically/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/bewe/Documents/ppta/subtically/web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgY2hlY2tib3g6IGZhbHNlLAogICAgICAgICAgICBsb2FkOiBmYWxzZSwKICAgICAgICAgICAgZGlhbG9nOiBmYWxzZSwKICAgICAgICAgICAgZm9ybTogewogICAgICAgICAgICAgICAgbmFtZTogJycsCiAgICAgICAgICAgICAgICB1c2VybmFtZTogJycsCiAgICAgICAgICAgICAgICBlbWFpbDogJycsCiAgICAgICAgICAgICAgICByb2xlOiAnJywKICAgICAgICAgICAgICAgIHBhc3N3b3JkX29sZDogJycsCiAgICAgICAgICAgICAgICBwYXNzd29yZDogJycsCiAgICAgICAgICAgICAgICBwYXNzd29yZF9jb25maXJtYXRpb246ICcnLAogICAgICAgICAgICB9LAogICAgICAgICAgICBlcnJvcnM6ICcnLAogICAgICAgICAgICB1c2VyOiBuZXcgRm9ybURhdGEsCiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBjbGVhcigpIHsKICAgICAgICAgICAgdGhpcy5yZWFkRGF0YSgpOwogICAgICAgIH0sCiAgICAgICAgcmVhZERhdGEoKSB7CiAgICAgICAgICAgIHZhciB1cmkgPSB0aGlzLiRhcGlVcmwgKyAnL3VzZXJzLycrdGhpcy4kcm91dGUucGFyYW1zLmlkCiAgICAgICAgICAgIHRoaXMuJGh0dHAuZ2V0KHVyaSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHJlc3BvbnNlLmRhdGEKICAgICAgICAgICAgICAgIHRoaXMuZm9ybS5uYW1lID0gaXRlbS5uYW1lCiAgICAgICAgICAgICAgICB0aGlzLmZvcm0uZW1haWwgPSBpdGVtLmVtYWlsCiAgICAgICAgICAgICAgICB0aGlzLmZvcm0udXNlcm5hbWUgPSBpdGVtLnVzZXJuYW1lCiAgICAgICAgICAgICAgICB0aGlzLmZvcm0ucm9sZSA9IGl0ZW0ucm9sZQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgdXBkYXRlRGF0YSgpIHsKICAgICAgICAgICAgdGhpcy51c2VyLmFwcGVuZCgnbmFtZScsIHRoaXMuZm9ybS5uYW1lKTsKICAgICAgICAgICAgdGhpcy51c2VyLmFwcGVuZCgnZW1haWwnLCB0aGlzLmZvcm0uZW1haWwpOwogICAgICAgICAgICBpZih0aGlzLmNoZWNrYm94KXsKICAgICAgICAgICAgICAgIHRoaXMudXNlci5hcHBlbmQoJ3Bhc3N3b3JkX29sZCcsIHRoaXMuZm9ybS5wYXNzd29yZF9vbGQpOwogICAgICAgICAgICAgICAgdGhpcy51c2VyLmFwcGVuZCgncGFzc3dvcmQnLCB0aGlzLmZvcm0ucGFzc3dvcmQpOwogICAgICAgICAgICAgICAgdGhpcy51c2VyLmFwcGVuZCgncGFzc3dvcmRfY29uZmlybWF0aW9uJywgdGhpcy5mb3JtLnBhc3N3b3JkX2NvbmZpcm1hdGlvbik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciB1cmkgPSB0aGlzLiRhcGlVcmwgKyAnL3VzZXJzLycrdGhpcy4kcm91dGUucGFyYW1zLmlkCiAgICAgICAgICAgIHRoaXMubG9hZCA9IHRydWUKICAgICAgICAgICAgdGhpcy4kaHR0cC5wb3N0KHVyaSwgdGhpcy51c2VyLCB7CiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiRzd2FsKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHJlc3BvbnNlLmRhdGEubWVzc2FnZSwKICAgICAgICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgdGltZXI6IDE1MDAKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB0aGlzLmxvYWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMucmVhZERhdGEoKTsgLy9yZWZyZXNoIGRhdGEgaW5pIAogICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9yCiAgICAgICAgICAgICAgICB0aGlzLiRzd2FsKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnZXJyb3InLAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnV2FybmluZyAhJywKICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLmVycm9ycywKICAgICAgICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgdGltZXI6IDE1MDAKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB0aGlzLmxvYWQgPSBmYWxzZTsKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgdGhpcy5yZWFkRGF0YSgpOwogICAgfSwKfQo="},{"version":3,"sources":["updateController.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"updateController.vue","sourceRoot":"src/components/user","sourcesContent":["<template>\n    <v-container dark>\n        <v-container grid-list-md mb-0>\n            <h1 class=\"text-md-center\" style=\"font-family: 'Share Tech Mono';text-shadow: -2px 4px 4px silver\">Update User</h1>\n            <v-layout row wrap style=\"margin:10px\">\n                <v-dialog v-model=\"dialog\" persistent max-width=\"500px\">\n                    <template v-slot:activator=\"{ on }\">\n                        <v-flex class=\"flex\" xs8 style=\"float:right;widht:300\">\n                            <v-btn class=\"mx-2\" fab color=\"primary\" v-on=\"on\" router to=\"/users\">\n                                Back\n                            </v-btn>\n                        </v-flex>\n                    </template>\n                    \n                </v-dialog>\n            </v-layout>\n            <v-card>\n                <v-card-text>\n                    <v-container>\n                        <v-row>\n                            <v-col cols=\"4\" sm=\"6\" md=\"12\">\n                                <v-text-field v-model=\"form.name\" label=\"Name\"></v-text-field>\n                            </v-col>\n                            <v-col cols=\"4\" sm=\"6\" md=\"12\">\n                                <v-text-field disabled v-model=\"form.username\" label=\"Username\"></v-text-field>\n                            </v-col>\n                            <v-col cols=\"4\" sm=\"6\" md=\"12\">\n                                <v-text-field v-model=\"form.email\" label=\"Email\"></v-text-field>\n                            </v-col>\n                            <v-col cols=\"4\" sm=\"6\" md=\"12\">\n                                <v-radio-group\n                                v-model=\"form.role\"\n                                row\n                                disabled\n                                >\n                                <v-radio\n                                    label=\"Admin\"\n                                    :value=1\n                                ></v-radio>\n                                <v-radio\n                                    label=\"Dosen\"\n                                    :value=2\n                                ></v-radio>\n                                <v-radio\n                                    label=\"Siswa\"\n                                    :value=3\n                                ></v-radio>\n                                </v-radio-group>\n                            </v-col>\n                            <v-col cols=\"4\" sm=\"6\" md=\"12\">\n                                <v-checkbox\n                                    v-model=\"checkbox\"\n                                    hide-details\n                                ></v-checkbox> Change Password?</v-col>\n                            <v-col cols=\"4\" sm=\"6\" md=\"12\">\n                                <v-text-field v-if=\"this.checkbox\" v-model=\"form.oldpassword\" label=\"Old Password\"></v-text-field>\n                            </v-col>\n                            <v-col cols=\"4\" sm=\"6\" md=\"12\">\n                                <v-text-field v-if=\"this.checkbox\" v-model=\"form.password\" label=\"New Password\"></v-text-field>\n                            </v-col>\n                            <v-col cols=\"4\" sm=\"6\" md=\"12\">\n                                <v-text-field v-if=\"this.checkbox\" v-model=\"form.repassword\" label=\"Retype New Password\"></v-text-field>\n                            </v-col>\n                        </v-row>\n                    </v-container>\n                </v-card-text>\n                <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn color=\"red accent-2\" text @click=\"clear\">Reset</v-btn>\n                    <v-btn color=\"primary\" text @click=\"updateData()\">Submit</v-btn>\n                </v-card-actions>\n            </v-card>\n        </v-container>\n    </v-container>\n</template>\n\n<script>\n    export default {\n        data() {\n            return {\n                checkbox: false,\n                load: false,\n                dialog: false,\n                form: {\n                    name: '',\n                    username: '',\n                    email: '',\n                    role: '',\n                    password_old: '',\n                    password: '',\n                    password_confirmation: '',\n                },\n                errors: '',\n                user: new FormData,\n            }\n        },\n        methods: {\n            clear() {\n                this.readData();\n            },\n            readData() {\n                var uri = this.$apiUrl + '/users/'+this.$route.params.id\n                this.$http.get(uri).then(response => {\n                    var item = response.data\n                    this.form.name = item.name\n                    this.form.email = item.email\n                    this.form.username = item.username\n                    this.form.role = item.role\n                })\n            },\n            updateData() {\n                this.user.append('name', this.form.name);\n                this.user.append('email', this.form.email);\n                if(this.checkbox){\n                    this.user.append('password_old', this.form.password_old);\n                    this.user.append('password', this.form.password);\n                    this.user.append('password_confirmation', this.form.password_confirmation);\n                }\n\n                var uri = this.$apiUrl + '/users/'+this.$route.params.id\n                this.load = true\n                this.$http.post(uri, this.user, {\n                        headers: {\n                            'Authorization': 'Bearer ' + localStorage.getItem('token')\n                        }\n                    }).then(response => {\n                    this.$swal({\n                        icon: 'success',\n                        title: response.data.message,\n                        showConfirmButton: false,\n                        timer: 1500\n                    })\n                    this.load = false;\n                    this.readData(); //refresh data ini \n                }).catch(error => {\n                    this.errors = error\n                    this.$swal({\n                        icon: 'error',\n                        title: 'Warning !',\n                        text: this.errors,\n                        showConfirmButton: false,\n                        timer: 1500\n                    })\n                    this.load = false;\n                })\n            },\n        },\n        mounted() {\n            this.readData();\n        },\n    }\n</script>"]}]}